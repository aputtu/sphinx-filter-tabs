# tox.ini

[tox]
parallel = auto
# Compatibility matrix:
#   Sphinx 7.0–8.1  requires Python >=3.10
#   Sphinx 8.2–9.0  requires Python >=3.11
#   Sphinx 9.1      requires Python >=3.12
envlist =
    lint
    mypy
    py310-sphinx70
    py310-sphinx74
    py310-sphinx80
    py311-sphinx70
    py311-sphinx74
    py311-sphinx80
    py311-sphinx82
    py311-sphinx90
    py312-sphinx70
    py312-sphinx74
    py312-sphinx80
    py312-sphinx82
    py312-sphinx90
    py312-sphinx91
    py313-sphinx70
    py313-sphinx74
    py313-sphinx80
    py313-sphinx82
    py313-sphinx90
    py313-sphinx91
    py314-sphinx70
    py314-sphinx74
    py314-sphinx80
    py314-sphinx82
    py314-sphinx90
    py314-sphinx91

[testenv]
deps =
    pytest>=8
    pytest-sphinx==0.6.3
    pytest-cov
    beautifulsoup4
    sphinx-rtd-theme>=2.0.0
    # Use tox "factors" to install the correct Sphinx version for each run
    sphinx70: Sphinx~=7.0
    sphinx74: Sphinx~=7.4
    sphinx80: Sphinx~=8.0
    sphinx82: Sphinx~=8.2
    sphinx90: Sphinx~=9.0
    sphinx91: Sphinx~=9.1

commands =
    pytest

[testenv:mypy]
deps =
    mypy>=1.10
    types-docutils
    Sphinx>=9.1
commands =
    mypy filter_tabs/

[testenv:lint]
deps =
    ruff
commands =
    ruff check filter_tabs/ tests/
    ruff format --check filter_tabs/ tests/
